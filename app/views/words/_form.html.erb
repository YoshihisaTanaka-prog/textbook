<%= form_with(model: word) do |form| %>
  <% if word.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(word.errors.count, "error") %> prohibited this word from being saved:</h2>

      <ul>
        <% word.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <% if @student %>
    <input type="hidden" id="current-time" value="<%= @student.current_time %>">
    <% if @student.current_time == 0 %>
      <select name="word[time]" id="word_time" onchange="changedTimeValue()">
        <option value="1">第1回</option>
      </select>
    <% else %>
      <select name="word[time]" id="word_time" onchange="changedTimeValue()">
        <option value="<%= @student.current_time %>" selected>第<%= @student.current_time %>回</option>
        <option value="<%= @student.current_time + 1 %>">第<%= @student.current_time + 1 %>回</option>
      </select>
    <% end %>
  <% end %>
  
  <div style="display: flex;">
    <div>
      <%= form.label :word, style: "display: block" %>
      <%= form.text_field :word %>
    </div>
    　
    <div>
      <%= form.label :mean, style: "display: block" %>
      <%= form.text_field :mean %>
    </div>
  </div>

  <div>
    <%= form.submit %>
  </div>

<% end %>

<script type="text/javascript">
  $("#word_word").focus();
</script>


<% if @student %>
  <script type="text/javascript">
    function changedTimeValue() {
      let id = "#" + $("#current-time").val();
      if ( $("#word_time").val() == $("#current-time").val() ) {
        $(id).attr("style", "margin: 0 auto;");
      } else {
        $(id).attr("style", "display: none;");
      }
    }
  </script>
<% end %>
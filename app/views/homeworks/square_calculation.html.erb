<p><%= link_to "計算トレーニングトップ", homeworks_path %></p>
<h2>100マス計算</h2>
解答付き<input type='range' id='status' value='0' min='0' max='1' style='width:2em;' onchange='changeStatus()'>問題のみ<br>
足し算<input type='range' id='operator' value='0' min='0' max='1' style='width:2em;' onchange='changeOperator()'>掛け算<br>
レベル<input type="range" min="1" max="7" value="1" id='level-input' onchange="levelChanged()"><span id="level-output">1</span>　　名前　　　　　　　　　　　　　　分　　秒
<div id="homework">
    <div class="level-1">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% [1,2,3,4,5,6,7,8,9,10].each do |i| %>
                    <th style="width: 9vw;"><%= i %></th>
                <% end %>
            </tr>

            <% [1,2,3,4,5,6,7,8,9,10].each do |i| %>
                <tr>
                    <th style="height: 9vw;"><%= i %></th>
                    <% [1,2,3,4,5,6,7,8,9,10].each do |j| %>
                        <td></td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>

    <div class="level-2" style="display: none;">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% @array3.each do |i| %>
                    <th style="width: 9vw;"><%= i %></th>
                <% end %>
            </tr>

            <% @array4.each do |i| %>
                <tr>
                    <th style="height: 9vw;"><%= i %></th>
                    <% @array3.each do |j| %>
                        <td></td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>   

     <div class="level-3" style="display: none;">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% @array3.each_with_index do |i, index| %>
                    <th style="width: 9vw;"><%= i * @pm_array[0][index] %></th>
                <% end %>
            </tr>

            <% @array4.each_with_index do |i, index_i| %>
                <tr>
                    <th style="height: 9vw;"><%= i * @pm_array[1][index_i]%></th>
                    <% @array3.each do |j| %>
                        <td></td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>   

    <div class="level-4" style="display: none;">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% [1,2,3,4,5,6,7,8,9,10].each do |i| %>
                    <th style="width: 9vw;"><%= i %></th>
                <% end %>
            </tr>

            <% [11,12,13,14,15,16,17,18,19,20].each do |i| %>
                <tr>
                    <th style="height: 9vw;"><%= i %></th>
                    <% [1,2,3,4,5,6,7,8,9,10].each do |j| %>
                        <td></td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>

    <div class="level-5" style="display: none;">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% [11,12,13,14,15,16,17,18,19,20].each do |i| %>
                    <th style="width: 9vw;"><%= i %></th>
                <% end %>
            </tr>

            <% [11,12,13,14,15,16,17,18,19,20].each do |i| %>
                <tr>
                    <th style="height: 9vw;"><%= i %></th>
                    <% [11,12,13,14,15,16,17,18,19,20].each do |j| %>
                        <td></td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>

    <div class="level-6" style="display: none;">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% @array1.each do |i| %>
                    <th style="width: 9vw;"><%= i %></th>
                <% end %>
            </tr>

            <% @array2.each do |i| %>
                <tr>
                    <th style="height: 9vw;"><%= i %></th>
                    <% @array1.each do |j| %>
                        <td></td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>

    <div class="level-7" style="display: none;">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% @array1.each_with_index do |i, index| %>
                    <th style="width: 9vw;"><%= i * @pm_array[0][index] %></th>
                <% end %>
            </tr>

            <% @array2.each_with_index do |i, index_i| %>
                <tr>
                    <th style="height: 9vw;"><%= i * @pm_array[1][index_i]%></th>
                    <% @array1.each do |j| %>
                        <td></td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>  
</div>

<div style="break-after: page;"></div>

<div id="answer">
    名前　　　　　　　　　　　　
    <div class="level-1">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% [1,2,3,4,5,6,7,8,9,10].each do |i| %>
                    <th style="width: 9vw;"><%= i %></th>
                <% end %>
            </tr>

            <% [1,2,3,4,5,6,7,8,9,10].each do |i| %>
                <tr>
                    <th style="height: 9vw;"><%= i %></th>
                    <% [1,2,3,4,5,6,7,8,9,10].each do |j| %>
                        <td>
                        <div class="plus">
                            <%= i + j %>
                        </div>
                        <div class="multiply" style="display: none;">
                            <%= i * j %>
                        </div>
                        </td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>

    <div class="level-2" style="display: none;">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% @array3.each do |i| %>
                    <th style="width: 9vw;"><%= i %></th>
                <% end %>
            </tr>

            <% @array4.each do |i| %>
                <tr>
                    <th style="height: 9vw;"><%= i %></th>
                    <% @array3.each do |j| %>
                        <td>
                        <div class="plus">
                            <%= i + j %>
                        </div>
                        <div class="multiply" style="display: none;">
                            <%= i * j %>
                        </div>
                        </td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div> 

    <div class="level-3" style="display: none;">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% @array3.each_with_index do |i, index| %>
                    <th style="width: 9vw;"><%= i * @pm_array[0][index] %></th>
                <% end %>
            </tr>

            <% @array4.each_with_index do |i, index_i| %>
                <tr>
                    <th style="height: 9vw;"><%= i * @pm_array[1][index_i]%></th>
                    <% @array3.each_with_index do |j, index_j| %>
                        <td>
                        <div class="plus">
                            <%= i * @pm_array[1][index_i] + j * @pm_array[0][index_j]  %>
                        </div>
                        <div class="multiply" style="display: none;">
                            <%= i * j * @pm_array[1][index_i] * @pm_array[0][index_j] %>
                        </div>
                        </td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>   

    <div class="level-4" style="display: none;">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% [1,2,3,4,5,6,7,8,9,10].each do |i| %>
                    <th style="width: 9vw;"><%= i %></th>
                <% end %>
            </tr>

            <% [11,12,13,14,15,16,17,18,19,20].each do |i| %>
                <tr>
                    <th style="height: 9vw;"><%= i %></th>
                    <% [1,2,3,4,5,6,7,8,9,10].each do |j| %>
                        <td>
                        <div class="plus">
                            <%= i + j %>
                        </div>
                        <div class="multiply" style="display: none;">
                            <%= i * j %>
                        </div>
                        </td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>

    <div class="level-5" style="display: none;">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% [11,12,13,14,15,16,17,18,19,20].each do |i| %>
                    <th style="width: 9vw;"><%= i %></th>
                <% end %>
            </tr>

            <% [11,12,13,14,15,16,17,18,19,20].each do |i| %>
                <tr>
                    <th style="height: 9vw;"><%= i %></th>
                    <% [11,12,13,14,15,16,17,18,19,20].each do |j| %>
                        <td>
                        <div class="plus">
                            <%= i + j %>
                        </div>
                        <div class="multiply" style="display: none;">
                            <%= i * j %>
                        </div>
                        </td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>

    <div class="level-6" style="display: none;">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% @array1.each do |i| %>
                    <th style="width: 9vw;"><%= i %></th>
                <% end %>
            </tr>

            <% @array2.each do |i| %>
                <tr>
                    <th style="height: 9vw;"><%= i %></th>
                    <% @array1.each do |j| %>
                        <td>
                        <div class="plus">
                            <%= i + j %>
                        </div>
                        <div class="multiply" style="display: none;">
                            <%= i * j %>
                        </div>
                        </td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>  

    <div class="level-7" style="display: none;">
        <table border="1" style="border-collapse: collapse">
            <tr>
                <th style="width: 9vw; height: 9vw;"><div class="plus">+</div><div class="multiply" style="display: none;">×</div></th>
                <% @array1.each_with_index do |i, index| %>
                    <th style="width: 9vw;"><%= i * @pm_array[0][index] %></th>
                <% end %>
            </tr>

            <% @array2.each_with_index do |i, index_i| %>
                <tr>
                    <th style="height: 9vw;"><%= i * @pm_array[1][index_i]%></th>
                    <% @array1.each_with_index do |j, index_j| %>
                        <td>
                        <div class="plus">
                            <%= i * @pm_array[1][index_i] + j * @pm_array[0][index_j]  %>
                        </div>
                        <div class="multiply" style="display: none;">
                            <%= i * j * @pm_array[1][index_i] * @pm_array[0][index_j] %>
                        </div>
                        </td>
                    <% end %>
                </tr>
            <% end %>
        </table>
    </div>  
</div>

<script type="text/javascript">
  function levelChanged(){
    let level = Number( $("#level-input").val() );
    $("#level-output").html(level);
    for (let index = 1; index <= 7; index++) {
        let id = ".level-" + index;
        $(id).attr("style","display:none;");
    }
    let id = ".level-" + level;
    $(id).attr("style","");
  }

  function changeStatus(){
    if ( $("#status").val() == "0" ) {
      $("#answer").attr("style", "");
    } else{
      $("#answer").attr("style", "display: none;");
    }
  }

  function changeOperator(){
    if ( $("#operator").val() == "0" ) {
      $(".plus").attr("style", "");
      $(".multiply").attr("style", "display: none;");
    } else{
      $(".plus").attr("style", "display: none;");
      $(".multiply").attr("style", "");
    }
  }
</script>